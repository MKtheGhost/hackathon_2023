<!DOCTYPE html>
<html>
<head>
    <title>Jeux des cartes mystères</title>
    <style>
        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        #cards {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        .card {
            width: 100px;
            height: 150px;
            border: None;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
        }
        #score {
            margin-top: 10px;
        }
        #characters {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 0px;
        }
        .character img {
            width: 150px;
            height: 150px;
        }

        .card img {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <center><h1 style="font-size:20px">Jeux des cartes mystères</h1></center>

    <div id="characters" style="float:left; width:100%;">

        <div class="character">
            <img src="personnages/joueur.png" alt="Joueur">
        </div>

        <div class="character">
            <img src="personnages/boss1.png" alt="Boss">
        </div>
    </div>

    <div id="game" style="float:right; width:70%">
        <div id="cards"></div>
        
    </div>

    <div id="affirmation-frame" style="margin-left:1.5%">
        <br>
        <h2>Affirmations :</h2>
		<div id="result"></div>
        <p id="affirmation"></p>
        <input type="text" id="eventName" placeholder="Nom de l'événement">
		<button id="validate-button" onclick="validateEventName()">Valider</button>
        <button id="show-button" onclick="displayRandomAffirmation()">Afficher une autre affirmation</button>
		<div id="score"></div>
    </div>

    <script>
        // Liste des 50 cartes possibles avec leurs affirmations
        const cards = [
            { imageUrl: "cartes/1.png", eventName:"1", affirmations: ["Affirmation 1", "Affirmation 2"] },
            { imageUrl: "cartes/1.png", eventName:"2", affirmations: ["Affirmation 3", "Affirmation 4"] },
            { imageUrl: "cartes/1.png", eventName:"3", affirmations: ["Affirmation 5", "Affirmation 6"] },
            { imageUrl: "cartes/1.png", eventName:"4", affirmations: ["Affirmation 7", "Affirmation 8"] },
            { imageUrl: "cartes/1.png", eventName:"5", affirmations: ["Affirmation 9", "Affirmation 10"] },
            { imageUrl: "cartes/1.png", eventName:"6", affirmations: ["Affirmation 11", "Affirmation 12"] },
            { imageUrl: "cartes/1.png", eventName:"7", affirmations: ["Affirmation 13", "Affirmation 14"] },
            { imageUrl: "cartes/1.png", eventName:"8", affirmations: ["Affirmation 15", "Affirmation 16"] },
            { imageUrl: "cartes/1.png", eventName:"9", affirmations: ["Affirmation 17", "Affirmation 18"] },
            { imageUrl: "cartes/1.png", eventName:"10", affirmations: ["Affirmation 19", "Affirmation 20"] },
            { imageUrl: "cartes/1.png", eventName:"11", affirmations: ["Affirmation 21", "Affirmation 22"] },
            { imageUrl: "cartes/1.png", eventName:"12", affirmations: ["Affirmation 23", "Affirmation 24"] },
            { imageUrl: "cartes/1.png", eventName:"13", affirmations: ["Affirmation 25", "Affirmation 26"] },
            { imageUrl: "cartes/1.png", eventName:"14", affirmations: ["Affirmation 27", "Affirmation 28"] },
            { imageUrl: "cartes/1.png", eventName:"15", affirmations: ["Affirmation 29", "Affirmation 30"] },
            { imageUrl: "cartes/1.png", eventName:"16", affirmations: ["Affirmation 31", "Affirmation 32"] },
            { imageUrl: "cartes/1.png", eventName:"17", affirmations: ["Affirmation 33", "Affirmation 34"] },
            { imageUrl: "cartes/1.png", eventName:"18", affirmations: ["Affirmation 35", "Affirmation 36"] },
            { imageUrl: "cartes/1.png", eventName:"19", affirmations: ["Affirmation 37", "Affirmation 38"] },
            { imageUrl: "cartes/1.png", eventName:"20", affirmations: ["Affirmation 39", "Affirmation 40"] },
            { imageUrl: "cartes/1.png", eventName:"21", affirmations: ["Affirmation 41", "Affirmation 42"] },
            { imageUrl: "cartes/1.png", eventName:"22", affirmations: ["Affirmation 43", "Affirmation 44"] },
            { imageUrl: "cartes/1.png", eventName:"23", affirmations: ["Affirmation 45", "Affirmation 46"] },
            { imageUrl: "cartes/1.png", eventName:"24", affirmations: ["Affirmation 47", "Affirmation 48"] },
            { imageUrl: "cartes/1.png", eventName:"25", affirmations: ["Affirmation 49", "Affirmation 50"] },
            { imageUrl: "cartes/1.png", eventName:"26", affirmations: ["Affirmation 51", "Affirmation 52"] },
            { imageUrl: "cartes/1.png", eventName:"27", affirmations: ["Affirmation 53", "Affirmation 54"] },

            // Ajoutez les autres cartes ici
        ];

        // Liste des affirmations affichées
        let displayedAffirmations = [];

        // Sélectionne une affirmation aléatoire parmi les affirmations disponibles pour une carte donnée
        function getRandomAffirmation(card) {
            const availableAffirmations = card.affirmations.filter(affirmation => !displayedAffirmations.includes(affirmation));
            const randomIndex = Math.floor(Math.random() * availableAffirmations.length);
            return availableAffirmations[randomIndex];
        }

        // Affiche une affirmation aléatoire dans le cadre
        function displayRandomAffirmation() {
            const affirmationElement = document.getElementById("affirmation");
            const showButtonElement = document.getElementById("show-button");
            const selectedCard = selectedCards[Math.floor(Math.random() * selectedCards.length)];
            let newAffirmation = getRandomAffirmation(selectedCard);

            // Vérifie si l'affirmation sélectionnée a déjà été affichée
            while (displayedAffirmations.includes(newAffirmation)) {
                // Sélectionne une nouvelle affirmation aléatoire
                newAffirmation = getRandomAffirmation(selectedCard);
            }

            // Ajoute la nouvelle affirmation à la liste des affirmations affichées
            displayedAffirmations.push(newAffirmation);

            // Met à jour le contenu du cadre avec toutes les affirmations affichées
            affirmationElement.innerHTML = displayedAffirmations.join("<br>");

            // Fait défiler jusqu'en bas pour afficher la dernière affirmation
            affirmationElement.scrollTop = affirmationElement.scrollHeight;

            // Vérifie si le nombre maximal d'affirmations est atteint
            if (displayedAffirmations.length >= 10) {
                showButtonElement.disabled = true;
            }
			
			// Diminue le score du joueur de 1
            score--;
            updateScore();
			// Vérifie si le joueur a perdu
			if (score === 0) {
				displayResult(`Dommage ! Vous avez perdu la partie, l'événement était : ${mysteryCard.eventName}`);
			}
        }
		
		// Fonction pour valider le nom de l'évènement
		function validateEventName() {
			const eventNameElement = document.getElementById("eventName");
			const eventName = eventNameElement.value.trim(); // Récupère la valeur saisie et supprime les espaces en début et fin de chaîne

			// Vérifie si la réponse est correcte
			if (eventName.toLowerCase() === mysteryCard.eventName.toLowerCase()) {
				displayResult("Gagné !");
			} else {
				displayResult("Perdu !");
			}
		}

        // Niveau de difficulté du jeu (1, 2 ou 3)
        const difficultyLevel = 1;

        // Nombre de cartes à sélectionner pour le jeu
        const numCards = 15;

        // Carte mystère à deviner
        let mysteryCard;

        // Cartes sélectionnées pour le jeu
        let selectedCards = [];

        // Score du joueur
        let score = 10;

        // Sélectionne les cartes pour le jeu
        function selectCards() {
            // Réinitialise les cartes sélectionnées
            selectedCards = [];

            // Sélectionne les cartes au hasard
            let availableCards = cards.slice(); // Copie de la liste des cartes
            for (let i = 0; i < numCards; i++) {
                const randomIndex = Math.floor(Math.random() * availableCards.length);
                const selectedCard = availableCards.splice(randomIndex, 1)[0];
                selectedCards.push(selectedCard);
            }

            // Choisis une carte mystère parmi les cartes sélectionnées
            mysteryCard = selectedCards[Math.floor(Math.random() * selectedCards.length)];

            // Affiche les cartes sur le plateau de jeu
            displayCards();
        }

        // Affiche les cartes sur le plateau de jeu
        function displayCards() {
            const cardsElement = document.getElementById("cards");
            cardsElement.innerHTML = "";

            for (let i = 0; i < selectedCards.length; i++) {
                const card = selectedCards[i];

                const cardElement = document.createElement("div");
                cardElement.className = "card";

                const imageElement = document.createElement("img");
                imageElement.src = card.imageUrl; // Utilisez la propriété imageUrl de la carte
                imageElement.setAttribute("alt", "Carte"); // Ajoutez l'attribut alt pour l'accessibilité
                imageElement.style.width = "100%"; // Ajuste la largeur de l'image à 100% de la carte

                cardElement.appendChild(imageElement);

                cardElement.addEventListener("click", () => {
                    checkGuess(card);
                });

                cardsElement.appendChild(cardElement);
            }
        }
		
        // Affiche le résultat de la partie
        function displayResult(message) {
            const resultElement = document.getElementById("result");
            resultElement.textContent = message;

            // Désactive les cartes pour empêcher le joueur de continuer à jouer
            const cardsElement = document.getElementById("cards");
            cardsElement.style.pointerEvents = "none";
        }

        // Met à jour le score du joueur
        function updateScore() {
            const scoreElement = document.getElementById("score");
            scoreElement.textContent = `Score : ${score}`;
        }

        // Initialise le jeu
        function initializeGame() {
            // Réinitialise les affirmations affichées et le score
            displayedAffirmations = [];
            score = 10;

            // Réactive les cartes pour permettre au joueur de jouer à nouveau
            const cardsElement = document.getElementById("cards");
            cardsElement.style.pointerEvents = "auto";

            // Affiche les cartes et sélectionne une carte mystère
            selectCards();

            // Réinitialise le résultat et le score affichés
            const resultElement = document.getElementById("result");
            resultElement.textContent = "";

            updateScore();
        }

        // Initialise le jeu au chargement de la page
        window.onload = initializeGame;
    </script>
</body>
</html>
